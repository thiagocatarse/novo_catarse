<!DOCTYPE html>
<html>
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <link href="../../../dist/output.css" rel="stylesheet" />
    <style></style>
  </head>

  <body class="bg-gray-50">
    <header class="my-0 mx-auto w-full max-w-7xl">
      <p class="title">Medium</p>
      <div
        class="horizontal-carousel-navigation my-0 mx-auto flex h-[200px] w-full items-center justify-center">
        <div class="carousel-reverse">
          <button type="button" disabled>
            <svg
              width="24"
              height="24"
              viewBox="0 0 24 24"
              fill="none"
              xmlns="http://www.w3.org/2000/svg">
              <path
                fill-rule="evenodd"
                clip-rule="evenodd"
                d="M15.707 4.293a1 1 0 0 1 0 1.414L9.414 12l6.293 6.293a1 1 0 1 1-1.414 1.414l-7-7a1 1 0 0 1 0-1.414l7-7a1 1 0 0 1 1.414 0z"
                fill-opacity=".8"></path>
            </svg>
          </button>
        </div>
        <div class="carousel-navigation relative h-full overflow-x-hidden">
          <ul
            class="carousel-navigation-inner m-0 flex h-full w-full translate-x-0 p-0">
            <li class="flex">
              <!-- Category Livros -->
              <a
                href="#"
                class="relative h-[180px] w-[180px] shrink-0 overflow-hidden rounded-2xl">
                <p class="absolute z-20 p-4 text-2xl font-semibold text-white">
                  Livros
                </p>
                <div
                  class="absolute z-10 h-full w-full bg-[#562626] opacity-70"></div>
                <img
                  src="./assets/categoria_livro_bg.jpg"
                  alt=""
                  class="absolute -z-0 h-full w-full object-cover" />
              </a>
            </li>
            <li class="flex">
              <!-- Category Quadrinhos -->
              <a
                href="#"
                class="relative h-[180px] w-[180px] shrink-0 overflow-hidden rounded-2xl">
                <p class="absolute z-20 p-4 text-2xl font-semibold text-white">
                  Quadrinhos & Ilustrações
                </p>
                <div
                  class="absolute z-10 h-full w-full bg-[#195627] opacity-70"></div>
                <img
                  src="./assets/categoria_quadrinhos_bg.jpg"
                  alt=""
                  class="absolute -z-0 h-full w-full object-cover" />
              </a>
            </li>
            <li class="flex">
              <!-- Category Jogos -->
              <a
                href="#"
                class="relative h-[180px] w-[180px] shrink-0 overflow-hidden rounded-2xl">
                <p class="absolute z-20 p-4 text-2xl font-semibold text-white">
                  Jogos
                </p>
                <div
                  class="absolute z-10 h-full w-full bg-[#2F188D] opacity-70"></div>
                <img
                  src="./assets/categoria_jogos_bg.jpg"
                  alt=""
                  class="absolute -z-0 h-full w-full object-cover" />
              </a>
            </li>
            <li class="flex">
              <!-- Category Podcast -->
              <a
                href="#"
                class="relative h-[180px] w-[180px] shrink-0 overflow-hidden rounded-2xl">
                <p class="absolute z-20 p-4 text-2xl font-semibold text-white">
                  Podcasts & Jornalismo
                </p>
                <div
                  class="absolute z-10 h-full w-full bg-[#264556] opacity-70"></div>
                <img
                  src="./assets/categoria_podcast_bg.jpg"
                  alt=""
                  class="absolute -z-0 h-full w-full object-cover" />
              </a>
            </li>
            <li class="flex">
              <!-- Category Artes -->
              <a
                href="#"
                class="relative h-[180px] w-[180px] shrink-0 overflow-hidden rounded-2xl">
                <p class="absolute z-20 p-4 text-2xl font-semibold text-white">
                  Artes & Fotografia
                </p>
                <div
                  class="absolute z-10 h-full w-full bg-[#6B3333] opacity-70"></div>
                <img
                  src="./assets/categoria_artes_bg.jpg"
                  alt=""
                  class="absolute -z-0 h-full w-full object-cover" />
              </a>
            </li>
            <li class="flex">
              <!-- Category Musica -->
              <a
                href="#"
                class="relative h-[180px] w-[180px] shrink-0 overflow-hidden rounded-2xl">
                <p class="absolute z-20 p-4 text-2xl font-semibold text-white">
                  Música
                </p>
                <div
                  class="absolute z-10 h-full w-full bg-[#5F1738] opacity-70"></div>
                <img
                  src="./assets/categoria_musica_bg.jpg"
                  alt=""
                  class="absolute -z-0 h-full w-full object-cover" />
              </a>
            </li>
            <li class="flex">
              <!-- Category Musica -->
              <a
                href="#"
                class="relative h-[180px] w-[180px] shrink-0 overflow-hidden rounded-2xl">
                <p class="absolute z-20 p-4 text-2xl font-semibold text-white">
                  Música
                </p>
                <div
                  class="absolute z-10 h-full w-full bg-[#5F1738] opacity-70"></div>
                <img
                  src="./assets/categoria_musica_bg.jpg"
                  alt=""
                  class="absolute -z-0 h-full w-full object-cover" />
              </a>
            </li>
          </ul>
        </div>
        <div class="carousel-forward">
          <button type="button">
            <svg
              width="24"
              height="24"
              viewBox="0 0 24 24"
              fill="none"
              xmlns="http://www.w3.org/2000/svg">
              <path
                fill-rule="evenodd"
                clip-rule="evenodd"
                d="M8.293 4.293a1 1 0 0 1 1.414 0l7 7a1 1 0 0 1 0 1.414l-7 7a1 1 0 0 1-1.414-1.414L14.586 12 8.293 5.707a1 1 0 0 1 0-1.414z"
                fill-opacity=".8"></path>
            </svg>
          </button>
        </div>
      </div>
    </header>

    <script type="application/javascript">
      const carouselForward = document.querySelectorAll(".carousel-forward");
      const carouselReverse = document.querySelectorAll(".carousel-reverse");
      let resizing = false;

      const updateNavWidth = () => {
        const carouselInner = document.querySelector(
          ".carousel-navigation-inner"
        );
        let carouselInnerWidth = 0;

        for (let i = 0; i < carouselInner.children.length; i++) {
          carouselInnerWidth += carouselInner.children[i].offsetWidth;
          carouselInnerWidth += parseFloat(
            window.getComputedStyle(carouselInner.children[i]).marginLeft
          );
          carouselInnerWidth += parseFloat(
            window.getComputedStyle(carouselInner.children[i]).marginRight
          );
        }

        carouselInner.style.width = `${carouselInnerWidth}px`;
        carouselInner.style.transform = "translateX(0)";

        // carousel forward button
        carouselInner.parentElement.nextElementSibling.children[0].disabled = false;

        // carousel reverse button
        carouselInner.parentElement.previousElementSibling.children[0].disabled = true;
      };

      const updateNavControls = () => {
        const carouselEL = document.querySelector(".carousel-navigation");
        const carouselInner = document.querySelector(
          ".carousel-navigation-inner"
        );

        const isCarouselSameWidth =
          Math.ceil(carouselEL.getBoundingClientRect().width) >=
          carouselInner.style.width.slice(0, -2);

        if (isCarouselSameWidth) {
          carouselForward[0].style.display = "none";
          carouselReverse[0].style.display = "none";
        } else {
          carouselForward[0].style.display = "initial";
          carouselReverse[0].style.display = "initial";
        }
      };

      carouselReverse.forEach((button) => {
        button.addEventListener("click", (e) => {
          if (e.target.nodeName === "BUTTON") {
            const carouselEl = e.target.parentElement.nextElementSibling;
            const carouselElInner = carouselEl.firstElementChild;
            const translateX = parseInt(
              window
                .getComputedStyle(carouselElInner)
                .transform.slice(7, -1)
                .split(",")[4]
            );

            const distance =
              e.target.getBoundingClientRect().right -
              carouselElInner.getBoundingClientRect().left;

            if (distance - carouselEl.getBoundingClientRect().width < 0) {
              carouselElInner.style.transform = "translateX(0)";

              // styling
              e.target.disabled = true;
              e.target.parentElement.nextElementSibling.nextElementSibling.children[0].disabled = false;
            } else {
              carouselElInner.style.transform = `translateX(${
                translateX + carouselEl.getBoundingClientRect().width
              }px)`;
              e.target.parentElement.nextElementSibling.nextElementSibling.children[0].disabled = false;
            }
          }
        });
      });

      carouselForward.forEach((button) => {
        button.addEventListener("click", (e) => {
          if (e.target.nodeName === "BUTTON") {
            const carouselEl = e.target.parentElement.previousElementSibling;
            const carouselElInner = carouselEl.firstElementChild;
            const translateX = parseInt(
              window
                .getComputedStyle(carouselElInner)
                .transform.slice(7, -1)
                .split(",")[4]
            );

            const distance =
              e.target.getBoundingClientRect().left -
              carouselElInner.getBoundingClientRect().right;

            if (distance + carouselEl.getBoundingClientRect().width > 0) {
              carouselElInner.style.transform = `translateX(-${
                carouselElInner.getBoundingClientRect().width -
                carouselEl.getBoundingClientRect().width
              }px)`;

              // styling
              e.target.disabled = true;
              e.target.parentElement.previousElementSibling.previousElementSibling.children[0].disabled = false;
            } else {
              carouselElInner.style.transform = `translateX(${
                translateX - carouselEl.getBoundingClientRect().width
              }px)`;
              e.target.parentElement.previousElementSibling.previousElementSibling.children[0].disabled = false;
            }
          }
        });
      });

      window.addEventListener("resize", () => {
        resizing = true;
      });

      setInterval(() => {
        if (resizing) {
          resizing = false;
          updateNavWidth();
          updateNavControls();
        }
      }, 250);

      updateNavWidth();
      updateNavControls();
    </script>
  </body>
</html>
